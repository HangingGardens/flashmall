import{_ as oe,d as te,v as le,h,i as se,y as r,c as ae,a as t,z as a,t as n,A as d,k as i,J as R,m as ne,E as A,a3 as x,G as K,T as w,a4 as ue,o as de,p as ie,f as re}from"./index-7d3f2326.js";import{B as pe}from"./BackIcon-029df9cf.js";import{u as Q}from"./upload-e4a1d109.js";import{d as ce}from"./category-f753d47d.js";import{b as ve,a as me}from"./shop-9300e9c0.js";import{a as fe}from"./index.esm-55925c95.js";import{u as H}from"./index-841768d1.js";const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB5CAYAAADyOOV3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUpSURBVHgB7Z2LURtXFIb/u7IERjy04wZEBSEVBFcQUgG4giQVxHSQDowr8KQCSAUmFaAGMndZrRBIaK/vWXmxBJKQBj/uHv5vRqPVPmZ29Oncc58rgyeSWbuXA3sOaGH8Ik8nMUAn8q/NOD7HEzBYEWdtKwWOjMGv/uMeKPV7cAaH93X//jKOO6tcuLTgvrXt2wi/O4cjUOqPw+CknuN4WdGPCpaIzcZi/wDFBoMvQd9u7cTHj5636KBE7dDg1G+2QUKkU3d4vSiao3kHutbue7kfQbkhIwH4MbX2YN4JMwVnqT1048hlkRw+LV8Of8jS9HDWwQdFdNHsGUcuqRZJ5Ivr+82qqQiWnOvlfgCpIi1xJw4nd04JHkb4C8y5VUZy8rvJHXeCfaI+wriNS6rNvlSQyw93OThN7AUYvVrobLfiXdkoIriIXsrVRLuM4nERbXAIogrfzJX6FMzn3qoLEHWMHOJo6JMyiEpqwIFvGxdDfkQh4jbyoxI/gejE4BepZLVBVOLbwC3j278ORC0RiGooWDkUrBwKVg4FK4eClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5LxAwzuXIrvro968xGo0QErVaDY1GHVvNZrEdKsEKFqH/2yQ4sSVyX/3+CIPBEK/iVrCSgy2iQ5Y7idxjkqYIlSAF3wwGlZBbIlE88PccIkEKli+sagxvbxEiQVeyJtn0lZmtzSZCoJv1kPV6U/vyPMzp5WwmKYeClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5FKwcClYOBSvn2Qu+vrmp1PyvVXnWgkXsZdqFTS6LOdgaebaCRahMzc3zvJgwJ/OsNKJOsERl7+rq0fO62dVU0dy76i91XdVQJbiMyrSbLZyn3O31ZsrMfBRry8eqBF96saUgyauzZElxnM0pjnPnih+IpnysRrBEpSxSK5klS4SL+EXIOZrysQrBstRlVlQW64Yuv6wbSnyNeZkiWFM+rszKhnmUTZ15XN8MiugWVlk/JD+Y9bW1oJeGLkPlI3herp1EZGUrFrta8nGlBUtkfstFXxrycWUFS47MvsOXX/V8XNkc3NzYKF5kMRxNUg4FK4eClUPBygmykhVF5sE+eWTC/ccmkMcJMoLrL6pXuV9r1BEiQQpuNBrFU+SqQq0WFfccIsHm4Nb2dvHFhY7c46s4RqgE/feyZVfhYCgPRgurT1gGITbW19FsvoQx4f4Q+f/BymEzSTkUrBwKVg4FK4eClUPByqFg5VCwcihYORSsHApWDgUrh4KVQ8HKoWDlULByKFg5FKwcEdwB0UpHppgnIFrpRLnDvyAqcQ7/SQSfg6hE3BprbatmYEHUMXLYjeI4lhx8BqKNM++2UzSTjMMxiC4c3svb3TrNy8Re+A9tkMrjfO15pxXvyvZdR0fk8AZEBZMl8tRK6zSxp/5tH6S6mOhke2fnLlinuip9reuNY89WZRF3ozyfqk89eFZCZu1ebiCR3AKpFD5Af/Y156l+jQeDDZtygsOfINXCl7735Qpm3vmptQf+6DswkoPGF8uJryD/thXHZ7OOm0UX+16utu/LPGXzKUwk5/qxhNfSoTHvnIXjwXKhtKccO0KCQqJWnOTjnNtZdK7BkhTRDLw1BocgPwQRKz1UOfD3Y2JLlhZcIqJr0lYei94H+aaIVBkV8hH7jxd78nnsYGlWFnyfolnlc7Qb52lWyL4OIjXxJeb55oya8Sp8AkNHH+Kye57UAAAAAElFTkSuQmCC",O=""+new URL("../images/info-arrow-84b360cc.svg",import.meta.url).href;const U=_=>(ie("data-v-0906f736"),_=_(),re(),_),ge={class:"px-3 text-default text-sm"},ye={class:"flex-start gap-2 mt-2"},we={class:"rounded-xl bg-white px-2 py-4 mt-4"},Ve={class:"flex-center-bw"},Ae={class:"key"},_e=U(()=>t("div",{class:"w-[50px] h-[50px] rounded-xl bg-gray1 text-center text-lg text-[#d9d9d9] font-bold"},[t("img",{src:he})],-1)),Se={class:"flex-center-bw mt-4"},Ue={class:"key"},ke={class:"flex-center-bw mt-4"},Ce={class:"key"},Be={class:"value"},Ie={class:"flex-center-bw mt-4"},be={class:"key"},Fe={class:"value"},Ee={class:"flex-center-bw mt-4"},Re={class:"key"},xe=A("%"),Ke={class:"flex-center-bw mt-4"},Qe={class:"key"},He={class:"value"},Oe={class:"flex-center-bw mt-4"},Le={class:"key"},qe={class:"value flex-start gap-1"},Ne=U(()=>t("img",{src:O,class:"w-[6px]",alt:""},null,-1)),Xe={class:"flex-center-bw mt-4"},Te={class:"key"},$e={class:"flex-center-bw mt-4"},Ze={class:"key"},Me={class:"value flex-start gap-1"},We=U(()=>t("img",{src:O,class:"w-[6px]",alt:""},null,-1)),Ye={class:"flex-center-bw mt-4"},De={class:"key"},Je=U(()=>t("img",{src:O,class:"w-[6px]",alt:""},null,-1)),Pe={class:"flex-center-bw mt-4"},je={class:"key"},ze=te({setup(_){const{t:V}=le(),S=h(!1),p=h(""),c=h(""),[k,C]=H(!1),[B,I]=H(!1),[b,F]=H(!1),s=h({logo:null,storeName:null,openingHours:null,discountRatio:null,classId:1,contact:null,location:null,scenery:null,qrCode:null,contactAddress:null}),L=h([]),N=async()=>{const e=await ce();!e.success||(L.value=(e.data||[]).map(o=>({value:o.id,text:o.name})))},X=e=>e>80?80:e,v=h([]),m=h([]),f=h([]),T=async e=>{const o=x(e,"shopLogo"),u=await Q(o);if(!u.success)return v.value.length-=1;v.value[v.value.length-1]={url:K.imgUrl+u.data}},$=async e=>{const o=x(e,"shopScenery"),u=await Q(o);if(!u.success)return m.value.length-=1;m.value[m.value.length-1]={url:K.imgUrl+u.data}},Z=async e=>{const o=x(e,"shopScenery"),u=await Q(o);if(!u.success)return f.value.length-=1;f.value[f.value.length-1]={url:K.imgUrl+u.data}},M=e=>{if(console.log(e),!e[0].code||!e[1].code)return w("\u8BF7\u5B8C\u6574\u9009\u62E9\u5730\u533A");s.value.location=[...new Set(e.map(o=>o.name))].join(""),C(!1)},W=e=>{p.value=e,I(!1)},Y=e=>{c.value=e,F(!1)},D=async()=>{if(S.value)return;if(!v.value.length)return w(V("shop.emptyLogo"));if(!s.value.storeName)return w(V("shop.emptyName"));if(!p.value)return w(V("shop.emptyOpenTime"));if(!c.value)return w(V("shop.emptyEndTime"));if(!s.value.discountRatio)return w(V("shop.emptyRadio"));if(!s.value.classId)return w(V("shop.emptyClass"));S.value=!0,s.value.logo=v.value[0].url,s.value.scenery=m.value.length?m.value[0].url:"",s.value.qrCode=f.value.length?f.value[0].url:"",s.value.openingHours=`${p.value} - ${c.value}`,console.log(s.value);const e=await ve(s.value);S.value=!1,e.success&&ue.back()},J=async()=>{var o,u,g;const e=await me();if(!(!e.success||!e.data)){if(s.value=e.data,e.data.openingHours){const y=e.data.openingHours.split("-");p.value=y[0].trim(),c.value=y[1].trim()}(o=e.data)!=null&&o.logo&&(v.value[0]={url:e.data.logo}),(u=e.data)!=null&&u.scenery&&(m.value[0]={url:e.data.scenery}),(g=e.data)!=null&&g.qrCode&&(f.value[0]={url:e.data.qrCode})}},P=()=>{N(),J()};return se(()=>{P()}),(e,o)=>{const u=r("van-uploader"),g=r("VanField"),y=r("van-field"),q=r("van-datetime-picker"),E=r("van-popup"),j=r("van-dropdown-item"),z=r("van-dropdown-menu"),G=r("van-area"),ee=r("VanButton");return de(),ae("div",ge,[t("div",ye,[a(pe),t("div",null,n(e.$t("order.shopInfo")),1)]),t("div",we,[t("div",Ve,[t("div",Ae,n(e.$t("shop.shopLogo")),1),a(u,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=l=>v.value=l),accept:"image/*","max-count":1,"preview-size":"50",afterRead:T},{default:d(()=>[_e]),_:1},8,["modelValue"])]),t("div",Se,[t("div",Ue,n(e.$t("shop.shopName")),1),a(g,{class:"value","input-align":"right",modelValue:s.value.storeName,"onUpdate:modelValue":o[1]||(o[1]=l=>s.value.storeName=l),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])]),t("div",ke,[t("div",Ce,n(e.$t("shop.openTime")),1),t("div",Be,[a(y,{"input-align":"right",autocomplete:"off",placeholder:e.$t("shop.pleaseSelect"),disabled:"","model-value":p.value,"onUpdate:model-value":o[2]||(o[2]=l=>p.value=l),onClick:o[3]||(o[3]=l=>i(I)(!0))},null,8,["placeholder","model-value"]),a(E,{round:"",show:i(B),"onUpdate:show":o[6]||(o[6]=l=>R(B)?B.value=l:null),position:"bottom",style:{height:"40%"}},{default:d(()=>[a(q,{modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=l=>p.value=l),type:"time",title:"\u9009\u62E9\u65F6\u95F4","min-hour":0,"max-hour":24,onConfirm:W,onCancel:o[5]||(o[5]=l=>i(I)(!1))},null,8,["modelValue"])]),_:1},8,["show"])])]),t("div",Ie,[t("div",be,n(e.$t("shop.endTime")),1),t("div",Fe,[a(y,{"input-align":"right",autocomplete:"off",placeholder:e.$t("shop.pleaseSelect"),disabled:"","model-value":c.value,"onUpdate:model-value":o[7]||(o[7]=l=>c.value=l),onClick:o[8]||(o[8]=l=>i(F)(!0))},null,8,["placeholder","model-value"]),a(E,{round:"",show:i(b),"onUpdate:show":o[11]||(o[11]=l=>R(b)?b.value=l:null),position:"bottom",style:{height:"40%"}},{default:d(()=>[a(q,{modelValue:c.value,"onUpdate:modelValue":o[9]||(o[9]=l=>c.value=l),type:"time",title:"\u9009\u62E9\u65F6\u95F4","min-hour":0,"max-hour":24,onConfirm:Y,onCancel:o[10]||(o[10]=l=>i(F)(!1))},null,8,["modelValue"])]),_:1},8,["show"])])]),ne(` <div class="flex-center-bw mt-4">
        <div class="key">{{ $t('shop.shopTime') }}</div>
        <VanField class="value" input-align="right" v-model="info.openingHours" :placeholder="$t('shop.pleaseInput')" />
      </div> `),t("div",Ee,[t("div",Re,n(e.$t("shop.shopRateSetting")),1),a(y,{class:"value","input-align":"right",modelValue:s.value.discountRatio,"onUpdate:modelValue":o[12]||(o[12]=l=>s.value.discountRatio=l),type:"digit",placeholder:e.$t("shop.pleaseInputPoint"),formatter:X},{"right-icon":d(()=>[xe]),_:1},8,["modelValue","placeholder"])]),t("div",Ke,[t("div",Qe,n(e.$t("shop.shopCategory")),1),t("div",He,[a(y,{"input-align":"right",autocomplete:"off"},{input:d(()=>[a(z,{"active-color":"#FEA021"},{default:d(()=>[a(j,{modelValue:s.value.classId,"onUpdate:modelValue":o[13]||(o[13]=l=>s.value.classId=l),options:L.value},null,8,["modelValue","options"])]),_:1})]),_:1})])]),t("div",Oe,[t("div",Le,n(e.$t("shop.shopPhoto")),1),a(u,{modelValue:m.value,"onUpdate:modelValue":o[14]||(o[14]=l=>m.value=l),accept:"image/*","max-count":1,"preview-size":"50",afterRead:$},{default:d(()=>[t("div",qe,[A(n(e.$t("shop.upload"))+" ",1),Ne])]),_:1},8,["modelValue"])]),t("div",Xe,[t("div",Te,n(e.$t("shop.contact")),1),a(g,{class:"value","input-align":"right",modelValue:s.value.contact,"onUpdate:modelValue":o[15]||(o[15]=l=>s.value.contact=l),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])]),t("div",$e,[t("div",Ze,n(e.$t("shop.qrCode")),1),a(u,{modelValue:f.value,"onUpdate:modelValue":o[16]||(o[16]=l=>f.value=l),accept:"image/*","max-count":1,"preview-size":"50",afterRead:Z},{default:d(()=>[t("div",Me,[A(n(e.$t("shop.upload"))+" ",1),We])]),_:1},8,["modelValue"])]),t("div",null,[t("div",Ye,[t("div",De,n(e.$t("shop.shopAddress")),1),t("div",{class:"value flex-end gap-1",onClick:o[17]||(o[17]=l=>i(C)(!0))},[A(n(e.$t("shop.edit"))+" ",1),Je]),a(E,{round:"",show:i(k),"onUpdate:show":o[19]||(o[19]=l=>R(k)?k.value=l:null),position:"bottom",style:{height:"40%"}},{default:d(()=>[a(G,{title:"\u6807\u9898","area-list":i(fe),"columns-placeholder":["\u8BF7\u9009\u62E9","\u8BF7\u9009\u62E9","\u8BF7\u9009\u62E9"],"columns-num":"2",onConfirm:M,onCancel:o[18]||(o[18]=l=>i(C)(!1))},null,8,["area-list"])]),_:1},8,["show"])]),a(g,{class:"rounded bg-[#f2f0ef] px-1 py-2 mt-2",readonly:"",modelValue:s.value.location,"onUpdate:modelValue":o[20]||(o[20]=l=>s.value.location=l),placeholder:e.$t("shop.pleaseSelect")},null,8,["modelValue","placeholder"])]),t("div",null,[t("div",Pe,[t("div",je,n(e.$t("shop.shopSpecificAddress")),1)]),a(g,{class:"rounded bg-[#f2f0ef] px-1 py-2 mt-2",modelValue:s.value.contactAddress,"onUpdate:modelValue":o[21]||(o[21]=l=>s.value.contactAddress=l),placeholder:e.$t("shop.pleaseInput")},null,8,["modelValue","placeholder"])])]),a(ee,{class:"btn-orange btn-shadow min-w-[130px] mt-2 block mx-auto",loading:S.value,onClick:D},{default:d(()=>[A(n(e.$t("common.confirm")),1)]),_:1},8,["loading"])])}}}),no=oe(ze,[["__scopeId","data-v-0906f736"],["__file","/Users/wangkeai/work/xueyan/flashmall/flashmall-dapp/src/view/shop/EditShopInfo.vue"]]);export{no as default};
