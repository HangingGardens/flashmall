import{_ as U,d as q,v as E,h as a,x as F,V as M,i as R,y as v,c as f,a as b,z as m,t as x,A as i,o as s,F as B,b as L,e as V,k as C,a5 as j,E as A,m as G}from"./index-27cd35bf.js";import{B as P}from"./BackIcon-9938d35a.js";import{B as S}from"./BuyerDeliveredItem-027a7c90.js";import{o as H}from"./order-ebc8cfc6.js";const J={class:"px-3 bg-[#f2f0ef]"},K={class:"flex-start gap-2 mt-2"},Q={key:0,class:"flex justify-end mt-5"},W=q({setup(X){const{t:_}=E(),t=a(0),g=F({tabList:[{id:1,name:_("order.wait")},{id:2,name:_("order.already")},{id:-1,name:_("order.all")}]}),h=M();h.query.active&&(t.value=Number(h.query.active));const n=a([]),o=a(!1),l=a(!1),u=a(0),w=a(10),k=a(0),p=async()=>{o.value=!0,u.value+=1,await T(),o.value=!1},y=a([]),T=async()=>{const e=await H({page:u.value,size:w.value,status:g.tabList[t.value].id,type:2});if(o.value=!1,!e.success){l.value=!0;return}if(!e.data||!e.total){l.value=!0;return}k.value=e.total,y.value=e.data,n.value=u.value===1?y.value:n.value.concat(y.value),n.value.length>=k.value&&(l.value=!0)},$=e=>{t.value=e,u.value=0,l.value=!1,n.value=[],p()},N=async()=>{};return R(()=>{p()}),(e,d)=>{const I=v("VanButton"),O=v("VanList"),z=v("VanTab"),D=v("VanTabs");return s(),f("div",J,[b("div",K,[m(P),b("div",null,x(e.$t("order.order")),1)]),m(D,{active:t.value,"onUpdate:active":d[1]||(d[1]=c=>t.value=c),onChange:$,background:"#f2f0ef",sticky:""},{default:i(()=>[(s(!0),f(B,null,L(C(g).tabList,c=>(s(),V(z,{title:c.name,key:c.id},{default:i(()=>[m(O,{loading:o.value,"onUpdate:loading":d[0]||(d[0]=r=>o.value=r),finished:l.value,"finished-text":e.$t("common.noMore"),"loading-text":e.$t("common.loading"),onLoad:p},{default:i(()=>[(s(!0),f(B,null,L(n.value,r=>(s(),V(S,{key:r.id,onClick:Y=>C(j)(`/buyerOrderDetail?id=${r.id}`),order:r},{default:i(()=>[t.value===1?(s(),f("div",Q,[m(I,{round:"",class:"btn text-primary px-6 h-9 font-semibold",onClick:N},{default:i(()=>[A(x(e.$t("order.confirmGeted")),1)]),_:1})])):G("v-if",!0)]),_:2},1032,["onClick","order"]))),128))]),_:1},8,["loading","finished","finished-text","loading-text"])]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}}),se=U(W,[["__scopeId","data-v-cf97398a"],["__file","/Users/wangkeai/work/xueyan/flashmall/flashmall-dapp/src/view/order/BuyerOrderList.vue"]]);export{se as default};
