import{_ as A,d as M,v as W,x as H,h as O,W as S,i as J,y as c,c as m,a as o,z as v,t as l,A as i,k as d,o as n,F as B,b as T,e as h,E as k,m as $,T as K,p as P,f as Q}from"./index-7d3f2326.js";import{B as X}from"./BackIcon-029df9cf.js";import{q as Y,a as Z,b as ee}from"./category-f753d47d.js";import{u as U}from"./index-841768d1.js";const se=""+new URL("../images/delete-8f82856e.svg",import.meta.url).href;const I=_=>(P("data-v-b1edad48"),_=_(),Q(),_),te={class:"px-3 text-default text-sm bg-gray1"},oe={class:"flex-start gap-2 mt-2"},ae={class:"rounded-xl bg-white px-2 py-4"},ne={class:"grid grid-cols-4 opacity-60 text-right mb-[10px]"},le={class:""},re={class:"text-center"},de={class:"text-center"},ce=I(()=>o("div",null,null,-1)),ie={class:"py-[10px] border-t border-[#e8e8e8] border-solid grid grid-cols-4 gap-1"},ue={class:"text-black whitespace-nowrap bg-[#EBEBEB] px-2 py-1 rounded-3xl"},pe={class:"relative"},me={class:"relative"},he=["onClick"],_e=I(()=>o("img",{src:se,class:"w-4 h-4",alt:""},null,-1)),be=["onClick"],fe=M({setup(_){const{t:g}=W(),[C,b]=U(!1),[V,u]=U(!1),s=H({active:0,tabList:[{id:1,name:g("shop.goods")},{id:2,name:g("shop.service")}],goodsClass:[],goodsTypeClass:[],classObj:{id:null,name:null,sortOrder:0,type:1,isEdit:!0}}),w=O([]),L=O(null),x=async()=>{const e=await Y();!e.success||(s.goodsClass=(e.data||[]).map(a=>({...a,isEdit:!1})))};S(()=>s.goodsClass,(e,a)=>{s.goodsTypeClass=e.filter(r=>r.type===s.active+1)},{deep:!0}),S(()=>s.active,(e,a)=>{s.goodsTypeClass=s.goodsClass.filter(r=>r.type===e+1)});const q=()=>{b(!0),s.classObj.id=null,s.classObj.name=null,s.classObj.sortOrder=null,s.classObj.type=s.active+1,s.classObj.isEdit=!0,s.goodsClass.push(s.classObj)},N=e=>{C.value||(b(!0),s.classObj=e,e.isEdit=!0)},F=async()=>{if(!s.classObj.name)return K(g("shop.emptySubClass"));u(!0);const e=await Z(s.classObj);u(!1),e.success&&(b(!1),x())},D=async(e,a)=>{if(u(!0),!e.id){s.goodsClass.splice(a+1,1),b(!1),u(!1);return}const r=await ee(e.id);u(!1),r.success&&x()};return J(async()=>{x()}),(e,a)=>{const r=c("van-checkbox"),E=c("VanField"),G=c("van-checkbox-group"),j=c("VanButton"),R=c("VanTab"),z=c("VanTabs");return n(),m("div",te,[o("div",oe,[v(X),o("div",null,l(e.$t("order.shopCategory")),1)]),v(z,{active:d(s).active,"onUpdate:active":a[1]||(a[1]=f=>d(s).active=f)},{default:i(()=>[(n(!0),m(B,null,T(d(s).tabList,f=>(n(),h(R,{title:f.name,key:f.id,class:"relative"},{default:i(()=>[o("div",ae,[o("div",ne,[o("div",le,l(e.$t("shop.categoryName")),1),o("div",re,l(e.$t("shop.position")),1),o("div",de,l(e.$t("shop.operation")),1),ce]),v(G,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),ref:(t,y)=>{y.checkboxGroup=t,L.value=t}},{default:i(()=>[(n(!0),m(B,null,T(d(s).goodsTypeClass,(t,y)=>(n(),m("div",ie,[t.isEdit?(n(),h(E,{key:1,class:"text-black whitespace-nowrap text-center items-center justify-center h-[1.75rem] px-[5px] mx-auto border border-black border-solid rounded-[20px]",modelValue:t.name,"onUpdate:modelValue":p=>t.name=p,placeholder:e.$t("shop.emptySubClass")},null,8,["modelValue","onUpdate:modelValue","placeholder"])):(n(),h(r,{key:0,name:t.id,class:"min-w-min"},{default:i(()=>[o("div",ue,l(t.name),1)]),_:2},1032,["name"])),o("div",pe,[v(E,{modelValue:t.sortOrder,"onUpdate:modelValue":p=>t.sortOrder=p,readonly:!t.isEdit,"input-align":"center",class:"absolute text-center items-center justify-center h-[1.75rem] border border-black border-solid rounded-[20px]"},null,8,["modelValue","onUpdate:modelValue","readonly"])]),o("div",me,[o("div",{class:"absolute right-0 inline-flex items-center justify-center h-[1.75rem] px-3 mx-auto border border-black border-solid rounded-[20px]",onClick:p=>D(t,y)},[_e,k(" "+l(e.$t("shop.delete")),1)],8,he)]),t.isEdit?$("v-if",!0):(n(),m("div",{key:2,class:"inline-flex items-center justify-center text-primary",onClick:p=>N(t)},l(e.$t("shop.edit")),9,be))]))),256))]),_:1},8,["modelValue"])]),$(` <div class="rounded-xl bg-white px-2 py-4 mt-4 flex-center-bw">
          <van-radio-group v-model="checked">
            <van-radio name="1" checked-color="#fea021">\u5168\u9009</van-radio>
          </van-radio-group>
          <VanButton round hairline class=" btn text-primary py-3 px-[35px]">
            \u6279\u91CF\u5220\u9664
          </VanButton>
        </div> `),d(C)?(n(),h(j,{key:1,class:"btn-orange w-[180px] h-10 flex-center text-white font-semibold fixed x-center bottom-9",loading:d(V),onClick:F},{default:i(()=>[k(l(e.$t("common.finish")),1)]),_:1},8,["loading"])):(n(),h(j,{key:0,class:"btn-orange w-[180px] h-10 flex-center text-white font-semibold fixed x-center bottom-9",loading:d(V),onClick:q},{default:i(()=>[k(l(e.$t("shop.addClass")),1)]),_:1},8,["loading"]))]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}}),ke=A(fe,[["__scopeId","data-v-b1edad48"],["__file","/Users/wangkeai/work/xueyan/flashmall/flashmall-dapp/src/view/shop/ShopCategory.vue"]]);export{ke as default};
